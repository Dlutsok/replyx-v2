# üöÄ ReplyX Production Environment Configuration
# Generated for replyx.ru deployment

# ==========================================
# üåç ENVIRONMENT & DEPLOYMENT
# ==========================================
ENVIRONMENT=production
NODE_ENV=production

# ==========================================
# üîê SECURITY & AUTHENTICATION
# ==========================================
# –¢–†–ï–ë–£–ï–¢–°–Ø: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
SECRET_KEY=QwGNFJB7KNXEemnOvvpy0OMB89nqRyWoZ1efSgceEIE

# JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
JWT_SECRET_KEY=exF6Z2GgDG6_3Q8uK9YIQL29zMqlEMNGzQSfzl56K88
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ==========================================
# –¢–†–ï–ë–£–ï–¢–°–Ø: –£–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL —Å–µ—Ä–≤–µ—Ä—É
DATABASE_URL=postgresql://gen_user:q%3F%7C%3E7!gzi%2BS.jJ@192.168.0.4:5432/replyx_production

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–¥–µ–ª—å–Ω–æ)
DB_HOST=192.168.0.4
DB_PORT=5432
DB_NAME=replyx_production
DB_USER=gen_user
DB_PASSWORD=q?|>7!gzi+S.jJ
DB_SSL_MODE=require  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
DB_POOL_SIZE=15
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# ==========================================
# üìß EMAIL/SMTP CONFIGURATION
# ==========================================
# –¢–†–ï–ë–£–ï–¢–°–Ø: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
YANDEX_SMTP_USER=dlutsok14@yandex.ru
YANDEX_SMTP_PASS=goumwxkeilbcrrdo
SMTP_SERVER=smtp.yandex.ru
SMTP_PORT=465
SMTP_USERNAME=dlutsok14@yandex.ru
SMTP_PASSWORD=goumwxkeilbcrrdo
FROM_EMAIL=dlutsok14@yandex.ru
FROM_NAME=ReplyX

# ==========================================
# üåê APPLICATION URLS
# ==========================================
DOMAIN=replyx.ru
FRONTEND_URL=https://replyx.ru
BACKEND_URL=https://replyx.ru
PUBLIC_URL=https://replyx.ru

# CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
CORS_ORIGINS=https://replyx.ru,https://www.replyx.ru

# OAuth redirect URLs
YANDEX_REDIRECT_URI=https://replyx.ru/api/auth/yandex/callback
FRONTEND_REDIRECT_URL=https://replyx.ru/oauth-redirect

# ==========================================
# üîí CSRF & SECURITY HEADERS
# ==========================================
ENABLE_CSRF_PROTECTION=true
SSL_REDIRECT=true
SECURE_COOKIES=true

# ==========================================
# ü§ñ AI CONFIGURATION
# ==========================================
# OpenAI API –∫–ª—é—á
OPENAI_API_KEY=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

# üåê –ü–†–û–ö–°–ò –î–õ–Ø OPENAI (–æ–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –†–§)
# –ù–æ–≤–∞—è JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–∫—Å–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏ —Ñ–µ–π–ª–æ–≤–µ—Ä–æ–º
OPENAI_PROXY_CONFIG=[{"url":"http://GunetAyL:a7SdSv3i@154.196.24.180:63872","priority":1,"name":"primary"},{"url":"http://GunetAyL:a7SdSv3i@154.195.184.24:62704","priority":2,"name":"secondary"}]

# –¢–∞–π–º–∏–Ω–≥–∏ –¥–ª—è –ø—Ä–æ–∫—Å–∏
OPENAI_PROXY_CONNECT_TIMEOUT=5
OPENAI_PROXY_READ_TIMEOUT=30
OPENAI_PROXY_STREAM_TIMEOUT=300

# Backward compatibility: —Å—Ç–∞—Ä–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è fallback
OPENAI_PROXY_URL=http://GunetAyL:a7SdSv3i@154.196.24.180:63872

# AI Token Pool
AI_TOKEN_POOL_SIZE=20

# –î—Ä—É–≥–∏–µ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
ANTHROPIC_API_KEY=your-anthropic-api-key-here
AI_PROXY_URL=

# Circuit Breaker –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
AI_CB_FAILURE_THRESHOLD=3
AI_CB_RESET_TIMEOUT=60

# Retry –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
AI_RETRY_MAX_ATTEMPTS=3
AI_RETRY_BASE_DELAY=0.5

# RAG/Embeddings –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
RAG_MAX_CONTEXT_TOKENS_BOT=1500
RAG_MAX_CONTEXT_TOKENS_WIDGET=1200
RAG_MIN_SIMILARITY=0.5
RAG_TOP_K_BOT=5
RAG_TOP_K_WIDGET=4

# ==========================================
# ‚ö° REDIS CACHE
# ==========================================
REDIS_URL=redis://:EGpdWYuMcl0hURheV8HbrPBHpG3zv8g6@redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=EGpdWYuMcl0hURheV8HbrPBHpG3zv8g6

# Rate limiting Redis
RATE_LIMIT_REDIS_URL=redis://:EGpdWYuMcl0hURheV8HbrPBHpG3zv8g6@redis:6379/1

# ==========================================
# üõ°Ô∏è RATE LIMITING
# ==========================================
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600

# ==========================================
# üë• USER MANAGEMENT
# ==========================================
TRIAL_DURATION_DAYS=7
TRIAL_MESSAGE_LIMIT=100

# ==========================================
# üéØ SITE/WIDGET INTEGRATION
# ==========================================
# –¢–†–ï–ë–£–ï–¢–°–Ø: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤
SITE_SECRET=d6X01uzgYMC4a5CUp49jlJri0SvZ14rKF5dq5bdItWE

# ==========================================
# ü§ù HANDOFF SYSTEM
# ==========================================
HANDOFF_ENABLED=true
# –¢–†–ï–ë–£–ï–¢–°–Ø: –£–∫–∞–∑–∞—Ç—å email –∞–¥—Ä–µ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
HANDOFF_RECIPIENTS=dlutok13@ya.ru

# –ü–æ—Ä–æ–≥–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ handoff
HANDOFF_MAX_FALLBACKS=2
HANDOFF_MAX_RETRIES=2

# SLA –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
HANDOFF_SLA_WEB_MINUTES=5
HANDOFF_SLA_TELEGRAM_MINUTES=3

# –¢—Ä–æ—Ç—Ç–ª–∏–Ω–≥
HANDOFF_REQUEST_TTL_MINUTES=10
HANDOFF_EMAIL_COOLDOWN_MINUTES=10

# –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
OPERATOR_OFFLINE_THRESHOLD_SECONDS=90
OPERATOR_HEARTBEAT_INTERVAL_SECONDS=30
OPERATOR_DEFAULT_MAX_CHATS_WEB=5
OPERATOR_DEFAULT_MAX_CHATS_TELEGRAM=8

# –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è handoff
HANDOFF_KEYWORDS_RU=–æ–ø–µ—Ä–∞—Ç–æ—Ä,—á–µ–ª–æ–≤–µ–∫,–º–µ–Ω–µ–¥–∂–µ—Ä,–ø–æ–¥–¥–µ—Ä–∂–∫–∞,–ø–æ–º–æ—â—å,–∂–∞–ª–æ–±–∞,–ø—Ä–æ–±–ª–µ–º–∞,–∂–∏–≤–æ–π,—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç,–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç
HANDOFF_KEYWORDS_EN=operator,human,manager,support,help,complaint,problem,live,specialist,consultant
HANDOFF_FALLBACK_PATTERNS=–Ω–µ –º–æ–≥—É –æ—Ç–≤–µ—Ç–∏—Ç—å,–Ω–µ –Ω–∞—à—ë–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏,–æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É,–Ω–µ –∑–Ω–∞—é,–∑–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å,–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏,–Ω–µ –ø–æ–Ω–∏–º–∞—é,–Ω–µ —É–≤–µ—Ä–µ–Ω

# ==========================================
# üîë OAUTH PROVIDERS
# ==========================================
# Yandex OAuth (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
YANDEX_CLIENT_ID=CHANGEME_PRODUCTION_YANDEX_CLIENT_ID
YANDEX_CLIENT_SECRET=CHANGEME_PRODUCTION_YANDEX_CLIENT_SECRET

# ==========================================
# üìÅ FILES & UPLOADS
# ==========================================
MAX_FILE_SIZE=10485760
MAX_FILE_SIZE_MB=50
UPLOAD_DIR=/var/www/replyx/uploads
ALLOWED_FILE_EXTENSIONS=pdf,docx,txt,md

# ==========================================
# üîß SERVER & PERFORMANCE
# ==========================================
HOST=0.0.0.0
PORT=8000
WORKERS=4

# ==========================================
# üìà LOGGING
# ==========================================
LOG_FILE=/var/log/replyx/api.log

# ==========================================
# üí≥ TINKOFF PAYMENTS (DISABLED - KEYS NOT PROVIDED)
# ==========================================
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¢-–ë–∞–Ω–∫ –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
# TINKOFF_TERMINAL_KEY=CHANGEME_PRODUCTION_TERMINAL_KEY
# TINKOFF_SECRET_KEY=CHANGEME_PRODUCTION_SECRET_KEY
# TINKOFF_SANDBOX_MODE=false  # –í–ê–ñ–ù–û: false –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞!
# TINKOFF_MIN_PAYMENT=100
# TINKOFF_MAX_PAYMENT=50000

# ==========================================
# ü§ñ TELEGRAM BOT CONFIGURATION
# ==========================================
TELEGRAM_BOT_TOKEN=8088014627:AAG4zYPlFdiCB6Zhy3rXiL_UpE0TDAa09Ys

# ==========================================
# üöÄ EXTERNAL SERVICES
# ==========================================
BOT_SERVICE_URL=http://localhost:3002

# ==========================================
# üìä MONITORING & LOGGING
# ==========================================
# Database monitoring
DB_SIZE_THRESHOLD_GB=50
TABLE_SIZE_THRESHOLD_GB=5
DB_DISK_USAGE_THRESHOLD=0.85
DB_GROWTH_THRESHOLD_MB_DAY=500
DB_MONITOR_EMAIL_ALERTS=true
# –¢–†–ï–ë–£–ï–¢–°–Ø: –£–∫–∞–∑–∞—Ç—å email –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
DB_MONITOR_ALERT_EMAILS=dlutsok13@ya.ru

# –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
SYSTEM_MONITOR_INTERVAL=60
SYSTEM_STATUS_FILE=tmp/system_status.json
MAX_MEMORY_MB=2048
MAX_CPU_PERCENT=90
MAX_RESTART_RATE=3

# Health checks
FASTAPI_HEALTH_URL=http://localhost:8000/health
PROMETHEUS_ENDPOINT=http://localhost:8000/metrics

# ==========================================
# üîß WORKERS CONFIGURATION (Node.js)
# ==========================================
# Bot Manager
BOT_MODE=webhook

# Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# –¢–†–ï–ë–£–ï–¢–°–Ø: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –¥–ª—è Telegram
WEBHOOK_HOST=https://replyx.ru
WEBHOOK_PORT=8443
WEBHOOK_SECRET=sdQdP6rGd1CncwFMB6NrhQ
WEBHOOK_SSL_CERT=/app/ssl/webhook_cert.pem
WEBHOOK_SSL_KEY=/app/ssl/webhook_private.key
WEBHOOK_MAX_CONNECTIONS=100
AUTO_SWITCH_MODE=false
VALIDATE_TELEGRAM_IP=true

# Worker limits
WORKER_MAX_TOTAL=2000
WORKER_MAX_PER_CORE=50
WORKER_MEMORY_LIMIT=157286400  # 150MB
WORKER_TIMEOUT=90000
WORKER_CONCURRENCY=16

# Process management
HEARTBEAT_INTERVAL=30000
COOLDOWN_PERIOD=30000
MAX_RESTART_RATE=3
ZOMBIE_CLEANUP_ON_START=true
GRACEFUL_SHUTDOWN_TIMEOUT=90000

# Telegram API rate limits
TELEGRAM_RATE_GLOBAL_RPS=30
TELEGRAM_RATE_CHAT_RPS=1
TELEGRAM_RATE_BURST_SIZE=5
TELEGRAM_MAX_RETRIES=3
TELEGRAM_RETRY_BASE_DELAY=1000
TELEGRAM_RETRY_MAX_DELAY=30000

# Logging
LOG_LEVEL=info
LOG_THROTTLE_INTERVAL=30000
LOG_RETENTION=1000
LOG_SUMMARY_INTERVAL=60000
LOG_PERSONAL_DATA=false

# Health monitoring
METRICS_ENABLED=true
METRICS_INTERVAL=30000
PROMETHEUS_PORT=9090
HEALTH_CHECK_PORT=3001
MONITORING_INTERVAL=30000

# API endpoints
BACKEND_API_URL=http://backend:8000
API_TIMEOUT=30000
API_RETRY_ATTEMPTS=3

# Performance
GC_INTERVAL=300000  # 5min
MEMORY_CHECK_INTERVAL=300000
EMERGENCY_STOP_THRESHOLD=0.90
STALE_WORKER_TIMEOUT=300000

# ==========================================
# üîÑ BACKUP & RECOVERY
# ==========================================
# Local backup –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
BACKUP_DIR=/var/backups/replyx
MAX_LOCAL_BACKUPS=7  # 7 –¥–Ω–µ–π
MAX_WEEKLY_BACKUPS=4  # 4 –Ω–µ–¥–µ–ª–∏
MAX_MONTHLY_BACKUPS=12  # 12 –º–µ—Å—è—Ü–µ–≤

# S3 backup (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
S3_BACKUP_ENABLED=false
# S3_BACKUP_BUCKET=CHANGEME_your-backup-bucket
# S3_BACKUP_REGION=us-east-1
# AWS_ACCESS_KEY_ID=CHANGEME_your-access-key
# AWS_SECRET_ACCESS_KEY=CHANGEME_your-secret-key

# ==========================================
# üë§ ADMIN BOOTSTRAP
# ==========================================
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
# –¢–†–ï–ë–£–ï–¢–°–Ø: –£–∫–∞–∑–∞—Ç—å email –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞
FIRST_ADMIN_EMAIL=dlutsok13@ya.ru
FIRST_ADMIN_MODE=invite
PUBLIC_APP_URL=https://replyx.ru
SEND_ADMIN_EMAIL=true

# ==========================================
# üö® ALERTS & NOTIFICATIONS
# ==========================================
# Webhook –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ (Slack/Discord)
# ALERT_WEBHOOK_URL=CHANGEME_https://hooks.slack.com/your/webhook
ALERT_EMAIL_ENABLED=true
ALERT_COOLDOWN=300000  # 5 –º–∏–Ω—É—Ç

# ==========================================
# üîç FRONTEND CONFIGURATION
# ==========================================
NEXT_PUBLIC_API_URL=https://replyx.ru

# ==========================================
# üìù LOGGING & DEBUG (Production)
# ==========================================
DEBUG_MODE=false
HOT_RELOAD_ENABLED=false
DRY_RUN=false
SIMULATE_ERRORS=false

# ==========================================
# üåê NEXT.JS SPECIFIC
# ==========================================
NEXT_TELEMETRY_DISABLED=1