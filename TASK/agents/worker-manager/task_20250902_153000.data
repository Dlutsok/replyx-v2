–î–ê–¢–ê: 2025-09-02 15:30:00
–°–¢–ê–¢–£–°: –ó–∞–≤–µ—Ä—à–µ–Ω–æ
–ó–ê–î–ê–ß–ê: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Node.js Workers –≤ –ø—Ä–æ–µ–∫—Ç–µ ChatAI MVP 13

–û–ë–ù–û–í–õ–ï–ù–ù–´–ï WORKERS:
- workers/package.json: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- workers/.env.example: –ø–æ–ª–Ω—ã–π —à–∞–±–ª–æ–Ω environment variables –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- workers/scripts/cleanup_processes.js: —É—Ç–∏–ª–∏—Ç–∞ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–≤–∏—Å—à–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- workers/scripts/monitor_workers.js: —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤

–ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨ –ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:
- Throughput: –¥–æ 1000 –≤–æ—Ä–∫–µ—Ä–æ–≤ —Å –ª–∏–º–∏—Ç–æ–º 20 –Ω–∞ —è–¥—Ä–æ CPU
- Error handling: graceful shutdown, zombie cleanup, retry logic
- Queue management: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ—á–µ—Ä–µ–¥–µ–π —Å Redis, idempotency, DLQ
- Resource monitoring: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –ø–∞–º—è—Ç–∏ (150MB/–≤–æ—Ä–∫–µ—Ä)

–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø:
- API dependencies: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –±–æ—Ç–æ–≤ –∏–∑ backend
- Database: PostgreSQL –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤, Redis –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á
- Telegram: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ polling/webhook —Ä–µ–∂–∏–º–æ–≤, rate limiting –ø–æ–ª–∏—Ç–∏–∫–∏

–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:
- docs/runbooks/workers.md: –ø–æ–ª–Ω–æ–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- docs/runbooks/telegram_limits.md: –ª–∏–º–∏—Ç—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ Telegram API
- docs/runbooks/queues.md: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏ –∑–∞–¥–∞—á —Å idempotency
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

–ö–õ–Æ–ß–ï–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø:
‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ò–∑–æ–ª—è—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–∫–∞–∂–¥—ã–π –±–æ—Ç = –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å)
- Graceful shutdown —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ SIGTERM/SIGINT
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (30 —Å–µ–∫—É–Ω–¥)
- Hot reload –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- Heartbeat –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (45 —Å–µ–∫—É–Ω–¥)
- Zombie process cleanup –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- Handoff —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º

üöß –ü–ª–∞–Ω—ã –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
- Idempotency keys –¥–ª—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
- Retry logic —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff  
- Dead Letter Queue (DLQ) –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–¥–∞—á
- Prometheus –º–µ—Ç—Ä–∏–∫–∏ –∏ Grafana –¥–∞—à–±–æ—Ä–¥—ã
- Circuit breaker –¥–ª—è Telegram API

–û–ü–ï–†–ê–¶–ò–û–ù–ù–´–ï –°–ö–†–ò–ü–¢–´:
- npm start/stop/restart/status –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- scripts/cleanup_processes.js --dry-run –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
- scripts/monitor_workers.js --continuous –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- Health endpoints –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 3001 –∏ 8443

–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:
- –¢–æ–∫–µ–Ω—ã –±–æ—Ç–æ–≤ –ø–æ–ª—É—á–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ API, –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–¥–µ
- Webhook –∑–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ secret token –∏ IP validation
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ù–ï –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- SSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω webhook —Ä–µ–∂–∏–º–∞

NEXT STEPS:
1. –í–Ω–µ–¥—Ä–∏—Ç—å Redis-based –æ—á–µ—Ä–µ–¥–∏ (Phase 1-2 –Ω–µ–¥–µ–ª–∏)
2. –î–æ–±–∞–≤–∏—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏ (Phase 2)
3. –°–æ–∑–¥–∞—Ç—å Grafana –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
5. Load testing —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏ Telegram