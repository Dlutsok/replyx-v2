# üõ°Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ReplyX

## –û–±–∑–æ—Ä

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–π bootstrap-—Å–∫—Ä–∏–ø—Ç `scripts/admin_bootstrap.py`.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∞

- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π** - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π** - –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –ø–∞—Ä–æ–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –ª–æ–≥–∞—Ö  
- ‚úÖ **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã** - invite (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏ interactive
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å production_deploy.sh
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞** - –∞–¥–º–∏–Ω—É –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è 200,000 —Ä—É–±

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

### Invite Mode (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–í invite-—Ä–µ–∂–∏–º–µ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –±–µ–∑ –ø–∞—Ä–æ–ª—è –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞—Ä–æ–ª—è:

```bash
export FIRST_ADMIN_EMAIL="admin@your-domain.com"
export FIRST_ADMIN_MODE="invite"
export PUBLIC_APP_URL="https://replyx.your-domain.com"
python3 scripts/admin_bootstrap.py
```

**–í—ã–≤–æ–¥:**
```
‚úÖ Admin created: admin@your-domain.com
üí∞ Created admin balance: 200000.00 —Ä—É–±
üìß Send this one-time password setup link (valid 24h):
   https://replyx.your-domain.com/reset-password?token=abc123...
```

### Interactive Mode

–í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å –±–µ–∑–æ–ø–∞—Å–Ω–æ —á–µ—Ä–µ–∑ getpass:

```bash
export FIRST_ADMIN_EMAIL="admin@your-domain.com"
export FIRST_ADMIN_MODE="interactive"
python3 scripts/admin_bootstrap.py
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å production_deploy.sh

Bootstrap-—Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ production_deploy.sh, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `FIRST_ADMIN_EMAIL`:

```bash
export DATABASE_URL="postgresql://user:pass@host:port/db"
export FIRST_ADMIN_EMAIL="admin@your-domain.com"
export FIRST_ADMIN_MODE="invite"
export PUBLIC_APP_URL="https://replyx.your-domain.com"

./scripts/production_deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------------|-------------|----------|
| `FIRST_ADMIN_EMAIL` | ‚úÖ | - | Email –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `FIRST_ADMIN_MODE` | ‚ùå | `invite` | –†–µ–∂–∏–º: `invite` –∏–ª–∏ `interactive` |
| `PUBLIC_APP_URL` | ‚ùå | `http://localhost:3000` | URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å—Å—ã–ª–æ–∫ —Å–±—Ä–æ—Å–∞ |
| `SEND_ADMIN_EMAIL` | ‚ùå | `false` | –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å email –≤ invite-—Ä–µ–∂–∏–º–µ |

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü–æ—á–µ–º—É invite-—Ä–µ–∂–∏–º –ª—É—á—à–µ

- üîí –ü–∞—Ä–æ–ª—å –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
- üîí –ü–∞—Ä–æ–ª—å –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ª–æ–≥–∏ CI/CD –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—é bash
- üîí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∞–º –∑–∞–¥–∞–µ—Ç –ø–∞—Ä–æ–ª—å –ø–æ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ
- üîí –°—Å—ã–ª–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ —Ç–æ–ª—å–∫–æ 24 —á–∞—Å–∞

### –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

‚ùå **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –∞–¥–º–∏–Ω–∞ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö** - —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö
‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω–æ–π SQL** - –ª–µ–≥–∫–æ –∑–∞–±—ã—Ç—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è  
‚ùå **–ù–ï —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
export FIRST_ADMIN_EMAIL="admin@localhost"
export FIRST_ADMIN_MODE="interactive"
python3 scripts/admin_bootstrap.py
```

### Staging/Production (—Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π email)
```bash
export FIRST_ADMIN_EMAIL="admin@company.com"
export FIRST_ADMIN_MODE="invite"  
export PUBLIC_APP_URL="https://replyx.company.com"
export SEND_ADMIN_EMAIL="true"  # –û—Ç–ø—Ä–∞–≤–∏—Ç—å email –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
python3 scripts/admin_bootstrap.py
```

### Staging/Production (–±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ email)
```bash
export FIRST_ADMIN_EMAIL="admin@company.com"
export FIRST_ADMIN_MODE="invite"  
export PUBLIC_APP_URL="https://replyx.company.com"
# SEND_ADMIN_EMAIL –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ = —Å—Å—ã–ª–∫–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
python3 scripts/admin_bootstrap.py
```

### –í —Å–æ—Å—Ç–∞–≤–µ CI/CD
```bash
# –í .github/workflows/deploy.yml –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–º
- name: Deploy database and create admin
  run: |
    export DATABASE_URL="${{ secrets.DATABASE_URL }}"
    export FIRST_ADMIN_EMAIL="${{ secrets.ADMIN_EMAIL }}"
    export FIRST_ADMIN_MODE="invite"
    export PUBLIC_APP_URL="${{ vars.PUBLIC_APP_URL }}"
    ./scripts/production_deploy.sh
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
SELECT id, email, role, status, is_email_confirmed, created_at 
FROM users 
WHERE role = 'admin';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
SELECT u.email, ub.balance, ub.total_topped_up, ub.created_at
FROM users u
JOIN user_balances ub ON u.id = ub.user_id
WHERE u.role = 'admin';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å admin_credit –Ω–∞ 200,000)
SELECT bt.transaction_type, bt.amount, bt.description, 
       bt.balance_before, bt.balance_after, bt.created_at
FROM users u
JOIN balance_transactions bt ON u.id = bt.user_id
WHERE u.role = 'admin';
```

## Troubleshooting

**–û—à–∏–±–∫–∞: "FIRST_ADMIN_EMAIL is required"**
```bash
export FIRST_ADMIN_EMAIL="admin@your-domain.com"
```

**–û—à–∏–±–∫–∞: "Admin already exists"**  
–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - —Å–∫—Ä–∏–ø—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –∏ –Ω–µ —Å–æ–∑–¥–∞—Å—Ç –¥—É–±–ª–∏–∫–∞—Ç.

**–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## –ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ bootstrap

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** —Å —Ä–æ–ª—å—é `admin` –∏ —Å—Ç–∞—Ç—É—Å–æ–º `active`
2. **–ë–∞–ª–∞–Ω—Å** –≤ —Ä–∞–∑–º–µ—Ä–µ **200,000 —Ä—É–±** –Ω–∞ —Å—á–µ—Ç—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—é** —Ç–∏–ø–∞ `admin_credit` –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
4. **–¢–æ–∫–µ–Ω —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è** (–≤ invite-—Ä–µ–∂–∏–º–µ) –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π 24 —á–∞—Å–∞

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- üîê –í–∫–ª—é—á–∏—Ç–µ MFA –¥–ª—è –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞
- üåê –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø–æ IP –≤ production
- üìß –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π email –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- üîÑ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- üí∞ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç 200,000 —Ä—É–±** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã