# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤–∏–¥–∂–µ—Ç–∞ ReplyX

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. –£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ WebSocket —Ñ–ª–∞–≥–æ–º `dialogLoaded`
- **–ë—ã–ª–æ:** WebSocket –ø–æ–¥–∫–ª—é—á–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏–∞–ª–æ–≥–∞
- **–°—Ç–∞–ª–æ:** WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `dialogId`, `token`/`assistantId` –∏ `guestId`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

### 2. –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **–ë—ã–ª–æ:** –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–°—Ç–∞–ª–æ:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å exponential backoff
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –£—Å—Ç–æ–π—á–∏–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –Ω–µ—Ç "–∑–∞–ª–∏–ø–∞–Ω–∏—è" –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ë—ã–ª–æ:** –ö—ç—à –º–æ–≥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–µ–∂–∏–µ WebSocket —Å–æ–æ–±—â–µ–Ω–∏—è
- **–°—Ç–∞–ª–æ:** –ö—ç—à –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç —Ç–µ–∫—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∫—ç—à–µ–º –∏ real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏**
2. **WebSocket –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏**
3. **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∏ live —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏**
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ `test-widget.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
3. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π
5. –ò–º–∏—Ç–∏—Ä—É–π—Ç–µ —Å–±–æ–π —Å–µ—Ç–∏ (–æ—Ç–∫–ª—é—á–∏—Ç–µ/–≤–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `frontend/pages/chat-iframe.js:410` - —É–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- `frontend/pages/chat-iframe.js:795` - —É–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `dialogLoaded`  
- `frontend/pages/chat-iframe.js:837-843` - —É–¥–∞–ª–µ–Ω –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è `dialogLoaded`
- `frontend/pages/chat-iframe.js:552-558` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- `frontend/pages/chat-iframe.js:1135-1160` - —É–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:
```javascript
// –ë—ã–ª–æ:
const maxReconnectAttempts = 5;
if (dialogId && (siteToken || assistantId) && guestId && dialogLoaded) {

// –°—Ç–∞–ª–æ:
const maxReconnectAttempts = Infinity;
if (dialogId && (siteToken || assistantId) && guestId) {
```