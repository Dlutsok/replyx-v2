<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —á–∞—Ç-–≤–∏–¥–∂–µ—Ç–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 40px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #007bff;
            padding-bottom: 10px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .test-section h3 {
            color: #555;
            margin-top: 0;
        }
        .checklist {
            list-style-type: none;
            padding: 0;
        }
        .checklist li {
            margin: 10px 0;
            padding: 5px;
        }
        .checklist li:before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
        }
        code {
            background: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
        .highlight {
            background: #fff3cd;
            padding: 10px;
            border-left: 4px solid #ffc107;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —á–∞—Ç-–≤–∏–¥–∂–µ—Ç–∞</h1>
        
        <div class="highlight">
            <strong>–¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:<br>
            1. –û—Ç–≤–µ—Ç—ã –±–æ—Ç–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏<br>
            2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
        </div>

        <div class="test-section">
            <h3>üìã –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            <ul class="checklist">
                <li>–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç-–≤–∏–¥–∂–µ—Ç</li>
                <li>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥</li>
                <li>–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—Ç–≤–µ—Ç—ã –±–æ—Ç–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –±–µ–∑ –∑–∞–∫—Ä—ã—Ç–∏—è/–æ—Ç–∫—Ä—ã—Ç–∏—è —á–∞—Ç–∞</li>
                <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π</li>
                <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤</li>
                <li>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</li>
                <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏ –¥–ª–∏–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>üîß –í–Ω–µ—Å—ë–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
            
            <h4>Frontend (chat-iframe.js):</h4>
            <ul>
                <li><strong>–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è scrollToBottom()</strong> - –Ω–∞–¥—ë–∂–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é</li>
                <li><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</strong></li>
                <li><strong>–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</strong></li>
                <li><strong>–ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏ —á–∞—Ç–∞ –∏–∑ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è</strong></li>
                <li><strong>Fallback useEffect –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</strong></li>
                <li><strong>–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ WebSocket useEffect</strong> - —É–±—Ä–∞–Ω–∞ isMinimized</li>
            </ul>

            <h4>Backend (site.py):</h4>
            <ul>
                <li><strong>–î–æ–±–∞–≤–ª–µ–Ω—ã WebSocket push –≤—ã–∑–æ–≤—ã –≤ widget_add_dialog_message()</strong></li>
                <li><strong>–ü—É—à —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ WebSocket</strong></li>
                <li><strong>–ü—É—à –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ WebSocket</strong></li>
            </ul>
        </div>

        <div class="test-section">
            <h3>üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            
            <p><strong>–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</strong></p>
            <ol>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü—Ä–∏–≤–µ—Ç"</li>
                <li>–ù–ï –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ —á–∞—Ç</li>
                <li>–û—Ç–≤–µ—Ç –±–æ—Ç–∞ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥</li>
                <li>‚úÖ <em>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –æ—Ç–≤–µ—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏</em></li>
            </ol>

            <p><strong>–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏</strong></p>
            <ol>
                <li>–°–æ–∑–¥–∞–π—Ç–µ –¥–ª–∏–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π (10+ —Å–æ–æ–±—â–µ–Ω–∏–π)</li>
                <li>–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —á–∞—Ç –≤–≤–µ—Ä—Ö</li>
                <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</li>
                <li>‚úÖ <em>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —á–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç—Å—è –∫ –Ω–æ–≤–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é</em></li>
            </ol>

            <p><strong>–°—Ü–µ–Ω–∞—Ä–∏–π 3: –¢–µ—Å—Ç –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è</strong></p>
            <ol>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π</li>
                <li>–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —á–∞—Ç</li>
                <li>–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —á–∞—Ç —Å–Ω–æ–≤–∞</li>
                <li>‚úÖ <em>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —á–∞—Ç –ø—Ä–æ–∫—Ä—É—Ç–∏–ª—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é</em></li>
            </ol>
        </div>

        <div class="test-section">
            <h3>üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏</h3>
            <p><strong>–§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏:</strong></p>
            <code>
                scrollToBottom(delay = 100) {<br>
                &nbsp;&nbsp;messagesEndRef.current?.scrollIntoView({<br>
                &nbsp;&nbsp;&nbsp;&nbsp;behavior: 'smooth',<br>
                &nbsp;&nbsp;&nbsp;&nbsp;block: 'end',<br>
                &nbsp;&nbsp;&nbsp;&nbsp;inline: 'nearest'<br>
                &nbsp;&nbsp;});<br>
                }
            </code>

            <p><strong>WebSocket –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</strong></p>
            <ul>
                <li>–£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å <code>isMinimized</code> –∏–∑ WebSocket useEffect</li>
                <li>–î–æ–±–∞–≤–ª–µ–Ω—ã push –≤—ã–∑–æ–≤—ã –≤ backend –¥–ª—è widget endpoints</li>
                <li>–°–æ–æ–±—â–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket</li>
            </ul>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç -->
    <script>
        window.ChatAIConfig = {
            apiUrl: 'http://localhost:8000',
            frontendUrl: 'http://localhost:3000',
            siteToken: 'test_site_token_12345',
            theme: 'blue'
        };
    </script>
    <script src="./chatai-widget.js"></script>
</body>
</html>